<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="pageTitle">英國中醫學習與就業前景資訊圖表</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #F8F9FA;
            color: #343A40;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .flowchart-step {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .flowchart-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #BFD7EA;
        }
        .lang-btn.active {
            font-weight: bold;
            text-decoration: underline;
            color: #0B3954;
        }
    </style>
</head>
<body class="antialiased">

    <main class="container mx-auto p-4 md:p-8 max-w-6xl">

        <header class="text-center mb-12 relative">
            <!-- Language Switcher -->
            <div class="absolute top-0 right-0 flex space-x-2 text-sm">
                <button id="lang-zh" class="lang-btn p-1 text-gray-500 hover:text-gray-800" data-lang="zh-Hant">繁體中文</button>
                <span class="text-gray-400">|</span>
                <button id="lang-en" class="lang-btn p-1 text-gray-500 hover:text-gray-800" data-lang="en">English</button>
            </div>
            
            <h1 class="text-4xl md:text-5xl font-bold text-[#0B3954] mb-2" data-lang-key="mainTitle">在英國學習中醫</h1>
            <p class="text-xl text-[#3C6E71]" data-lang-key="subTitle">市場、學費與職業前景深度解析</p>
        </header>

        <!-- Section 1: The Growing Demand -->
        <section id="demand" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#0B3954] mb-8" data-lang-key="demandTitle">日益增長的市場需求</h2>
            <div class="grid grid-cols-1 md:grid-cols-5 gap-8 items-center">
                <div class="md:col-span-2 space-y-4">
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-[#087E8B] mb-2" data-lang-key="acceptanceTitle">公眾接受度高</h3>
                        <p class="text-6xl font-bold text-[#0B3954]">30<span class="text-4xl">%</span></p>
                        <p class="text-[#3C6E71]" data-lang-key="acceptanceDesc">的英國成年人曾使用過某種形式的補充和替代醫學，顯示出廣泛的群眾基礎。</p>
                    </div>
                     <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-[#087E8B] mb-2" data-lang-key="usageTitle">專業服務使用情況</h3>
                        <div class="chart-container" style="height: 200px; max-height: 200px;">
                            <canvas id="tcmUsageChart"></canvas>
                        </div>
                         <p class="text-sm text-[#3C6E71] mt-4" data-lang-key="usageDesc">儘管對草藥療法持開放態度，但僅有5%的成年人曾尋求專業中醫師的服務，這表明專業市場仍有巨大的增長潛力。</p>
                    </div>
                </div>
                <div class="md:col-span-3 bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-center text-[#087E8B] mb-2" data-lang-key="marketTitle">英國針灸市場預測</h3>
                    <p class="text-center text-sm text-[#3C6E71] mb-4" data-lang-key="marketDesc">市場規模預計將以7.22%的年複合增長率持續擴大，前景看好。</p>
                    <div class="chart-container">
                        <canvas id="marketGrowthChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: The Educational Path -->
        <section id="education" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#0B3954] mb-8" data-lang-key="educationTitle">教育路徑與成本</h2>
            <div class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-8">
                 <h3 class="text-xl font-bold text-center text-[#087E8B] mb-6" data-lang-key="pathTitle">成為專業中醫師的典型路徑</h3>
                 <div class="grid grid-cols-2 md:grid-cols-5 gap-2">
                     <div class="flowchart-step bg-[#C4E5E3] text-[#0B3954] p-4 rounded-lg h-24"><span data-lang-key="pathStep1">選擇認證課程<br>(BAAB/EHTPA)</span></div>
                     <div class="flowchart-arrow max-md:hidden">→</div>
                     <div class="flowchart-step bg-[#BFD7EA] text-[#0B3954] p-4 rounded-lg h-24"><span data-lang-key="pathStep2">3年全日制學習<br>(含至少400小時臨床)</span></div>
                     <div class="flowchart-arrow max-md:hidden">→</div>
                     <div class="flowchart-step bg-[#3C6E71] text-white p-4 rounded-lg h-24"><span data-lang-key="pathStep3">獲得學位或執業證書</span></div>
                     <div class="flowchart-arrow md:hidden col-span-2 text-3xl">↓</div>
                     <div class="flowchart-arrow max-md:hidden">→</div>
                     <div class="flowchart-step bg-[#087E8B] text-white p-4 rounded-lg h-24"><span data-lang-key="pathStep4">加入專業協會<br>(BAcC/RCHM)</span></div>
                      <div class="flowchart-arrow max-md:hidden">→</div>
                     <div class="flowchart-step bg-[#0B3954] text-white p-4 rounded-lg h-24"><span data-lang-key="pathStep5">獲得地方政府執業許可</span></div>
                 </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-center text-[#087E8B] mb-4" data-lang-key="tuitionTitle">主要院校年學費比較 (英國學生)</h3>
                    <p class="text-center text-sm text-[#3C6E71] mb-4" data-lang-key="tuitionDesc">選擇經BAAB認證的課程是專業地位的保證，但投資也相對較高。</p>
                    <div class="chart-container">
                        <canvas id="tuitionFeeChart"></canvas>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 flex flex-col justify-center items-center text-center">
                    <h3 class="text-xl font-bold text-[#087E8B] mb-4" data-lang-key="investmentTitle">完成學位級課程總投資</h3>
                    <p class="text-5xl font-bold text-[#0B3954]">£22,000 - £28,000</p>
                    <p class="text-lg text-[#3C6E71] mt-2" data-lang-key="investmentDesc">（三年學費總額）</p>
                    <p class="text-sm text-[#3C6E71] mt-4" data-lang-key="investmentExtra">+ 約 £700 額外費用<br>(教材、工具、急救課程等)</p>
                </div>
            </div>
        </section>

        <!-- Section 3: The Professional Landscape -->
        <section id="landscape" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#0B3954] mb-8" data-lang-key="landscapeTitle">專業人士版圖與監管</h2>
             <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-center text-[#087E8B] mb-4" data-lang-key="regulationTitle">行業監管框架</h3>
                    <p class="text-center text-sm text-[#3C6E71] mb-4" data-lang-key="regulationDesc">英國中醫行業目前為雙軌制監管，理解其結構對從業至關重要。</p>
                    <div class="space-y-4">
                        <div class="border-2 border-[#0B3954] rounded-lg p-4">
                            <h4 class="font-bold text-[#0B3954]" data-lang-key="regVoluntaryTitle">自願性自我監管 (能力與道德)</h4>
                            <p class="text-sm" data-lang-key="regVoluntaryDesc">由專業協會主導，PSA認證其註冊名錄以保障公眾。</p>
                            <div class="flex space-x-4 mt-2">
                                <span class="bg-[#0B3954] text-white text-xs font-bold px-2 py-1 rounded">BAcC</span>
                                <span class="bg-[#087E8B] text-white text-xs font-bold px-2 py-1 rounded">RCHM</span>
                                <span class="bg-[#3C6E71] text-white text-xs font-bold px-2 py-1 rounded">ATCM</span>
                            </div>
                        </div>
                        <div class="border-2 border-[#BFD7EA] rounded-lg p-4">
                             <h4 class="font-bold text-[#3C6E71]" data-lang-key="regMandatoryTitle">強制性地方許可 (衛生與安全)</h4>
                            <p class="text-sm" data-lang-key="regMandatoryDesc">所有從業者及其執業場所必須向地方政府申請許可，確保環境安全。</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-center text-[#087E8B] mb-6" data-lang-key="membersTitle">主要專業協會會員數 (估計)</h3>
                    <p class="text-center text-sm text-[#3C6E71] mb-6" data-lang-key="membersDesc">雖然無準確學生數據，但主要協會的會員規模反映了行業內合格從業者的數量。</p>
                    <div class="space-y-6">
                        <div class="flex items-center">
                            <span class="text-4xl mr-4">👥</span>
                            <div>
                                <p class="text-2xl font-bold text-[#0B3954]">> 700</p>
                                <p class="text-[#3C6E71]" data-lang-key="membersAtcm">英國中醫藥學會 (ATCM) 註冊會員</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <span class="text-4xl mr-4">🌿</span>
                            <div>
                                <p class="text-2xl font-bold text-[#0B3954]">~ 300</p>
                                <p class="text-[#3C6E71]" data-lang-key="membersRchm">英國中藥師學會 (RCHM) 會員</p>
                            </div>
                        </div>
                         <div class="flex items-center">
                            <span class="text-4xl mr-4">📍</span>
                            <div>
                                <p class="text-xl font-bold text-[#0B3954]" data-lang-key="membersBaccCount">人數眾多</p>
                                <p class="text-[#3C6E71]" data-lang-key="membersBaccDesc">英國針灸理事會 (BAcC) 是針灸領域的主要監管機構</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Your Future in TCM -->
        <section id="prospects" class="mb-12">
            <h2 class="text-3xl font-bold text-center text-[#0B3954] mb-8" data-lang-key="prospectsTitle">您的中醫職業前景</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-center text-[#087E8B] mb-4" data-lang-key="salaryTitle">預期年薪範圍</h3>
                    <p class="text-center text-sm text-[#3C6E71] mb-4" data-lang-key="salaryDesc">收入潛力可觀，但很大程度上取決於經驗、地點和執業模式。</p>
                    <div class="chart-container">
                        <canvas id="salaryChart"></canvas>
                    </div>
                </div>
                 <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-center text-[#087E8B] mb-4" data-lang-key="swotTitle">機遇與挑戰</h3>
                    <p class="text-center text-sm text-[#3C6E71] mb-4" data-lang-key="swotDesc">中醫行業在英國充滿潛力，但也需應對現存的挑戰。</p>
                    <div class="grid grid-cols-2 gap-6 mt-6">
                        <div>
                            <h4 class="text-lg font-bold text-green-600 mb-2" data-lang-key="oppTitle">📈 增長機遇</h4>
                            <ul class="list-disc list-inside space-y-2 text-sm">
                                <li data-lang-key="opp1">市場需求持續增長</li>
                                <li data-lang-key="opp2">慢性病治療需求龐大</li>
                                <li data-lang-key="opp3">與西醫整合潛力巨大</li>
                                <li data-lang-key="opp4">可專攻高需求領域 (如不孕症、痛症管理)</li>
                            </ul>
                        </div>
                        <div>
                             <h4 class="text-lg font-bold text-red-600 mb-2" data-lang-key="chaTitle">⚠️ 面臨挑戰</h4>
                             <ul class="list-disc list-inside space-y-2 text-sm">
                                <li data-lang-key="cha1">缺乏法定從業者監管</li>
                                <li data-lang-key="cha2">公眾對中醫存有誤解</li>
                                <li data-lang-key="cha3">NHS系統整合有限</li>
                                <li data-lang-key="cha4">私人執業需具備商業頭腦</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="text-center text-sm text-gray-500 mt-12">
            <p data-lang-key="footerSource">本資訊圖表數據來源於《英國中醫學習與執業前景深度解析》報告。</p>
            <p data-lang-key="footerCopyright">所有圖表及數據僅供參考。© 2025</p>
        </footer>

    </main>

    <script>
        // 1. TEXT AND TRANSLATION DATA
        const translations = {
            "en": {
                pageTitle: "TCM Study & Career Prospects in the UK: An Infographic",
                mainTitle: "Studying Traditional Chinese Medicine in the UK",
                subTitle: "A Deep Dive into the Market, Tuition, and Career Prospects",
                demandTitle: "The Growing Market Demand",
                acceptanceTitle: "High Public Acceptance",
                acceptanceDesc: "of UK adults have used some form of complementary and alternative medicine, showing a broad base of interest.",
                usageTitle: "Professional Service Utilisation",
                usageDesc: "Despite openness to herbal remedies, only 5% of adults have consulted a professional TCM practitioner, indicating significant potential for market growth.",
                marketTitle: "UK Acupuncture Market Forecast",
                marketDesc: "The market size is projected to expand at a compound annual growth rate (CAGR) of 7.22%, indicating a promising outlook.",
                educationTitle: "Educational Pathways and Costs",
                pathTitle: "Typical Path to Becoming a Professional Practitioner",
                pathStep1: "Choose Accredited Course\n(BAAB/EHTPA)",
                pathStep2: "3 Years Full-Time Study\n(incl. 400+ clinical hours)",
                pathStep3: "Obtain Degree or Diploma",
                pathStep4: "Join Professional Body\n(BAcC/RCHM)",
                pathStep5: "Get Local Authority Licence",
                tuitionTitle: "Annual Tuition Fee Comparison (UK Students)",
                tuitionDesc: "Choosing a BAAB-accredited course ensures professional standing but comes with a higher investment.",
                investmentTitle: "Total Investment for a Degree-Level Course",
                investmentDesc: "(Total tuition for three years)",
                investmentExtra: "+ approx. £700 in extra costs\n(books, equipment, first aid courses, etc.)",
                landscapeTitle: "Professional Landscape & Regulation",
                regulationTitle: "Industry Regulatory Framework",
                regulationDesc: "The UK's TCM sector currently operates under a dual-track regulatory system. Understanding this structure is crucial for practitioners.",
                regVoluntaryTitle: "Voluntary Self-Regulation (Competence & Ethics)",
                regVoluntaryDesc: "Led by professional associations, whose registers are accredited by the Professional Standards Authority (PSA) to protect the public.",
                regMandatoryTitle: "Mandatory Local Licensing (Health & Safety)",
                regMandatoryDesc: "All practitioners and their premises must be licensed by the local council to ensure a safe environment.",
                membersTitle: "Estimated Membership of Major Professional Bodies",
                membersDesc: "While exact student data is unavailable, the membership size of major associations reflects the number of qualified practitioners in the industry.",
                membersAtcm: "registered members in the Association of Traditional Chinese Medicine and Acupuncture UK (ATCM)",
                membersRchm: "members in the Register of Chinese Herbal Medicine (RCHM)",
                membersBaccCount: "Large Membership",
                membersBaccDesc: "The British Acupuncture Council (BAcC) is the main regulatory body for acupuncture.",
                prospectsTitle: "Your Future in TCM",
                salaryTitle: "Expected Annual Salary Range",
                salaryDesc: "Income potential is significant but heavily depends on experience, location, and practice model.",
                swotTitle: "Opportunities & Challenges",
                swotDesc: "The TCM industry in the UK is full of potential but also requires navigating existing challenges.",
                oppTitle: "📈 Growth Opportunities",
                opp1: "Continuously growing market demand",
                opp2: "High demand for chronic condition treatments",
                opp3: "Great potential for integration with Western medicine",
                opp4: "Can specialise in high-demand areas (e.g., infertility, pain management)",
                chaTitle: "⚠️ Challenges Ahead",
                cha1: "Lack of statutory regulation for practitioners",
                cha2: "Public misconceptions about TCM",
                cha3: "Limited integration into the NHS system",
                cha4: "Requires business acumen for private practice",
                footerSource: "Data for this infographic is sourced from the 'In-depth Analysis of TCM Study and Practice Prospects in the UK' report.",
                footerCopyright: "All charts and data are for reference only. © 2025",
                chartMarketLabel: "Market Size (in Billions USD)",
                chartTuitionLabel: "Annual Tuition (GBP)",
                chartSalaryLabel: "Annual Salary (GBP)",
                chartUsageLabels: ["Consulted Professional TCM Practitioner", "Used Other CAM or Herbal Remedies"],
                chartTuitionLabels: ["Northern College of Acupuncture (BAAB Accredited)", "City College of Acupuncture (BAAB Accredited)", "Shulan College of Chinese Medicine"],
                chartSalaryLabels: ["Employed Starting Salary", "Employed Average", "Self-Employed (Established)", "NHS (Band 6)"]
            },
            "zh-Hant": {
                pageTitle: "英國中醫學習與就業前景資訊圖表",
                mainTitle: "在英國學習中醫",
                subTitle: "市場、學費與職業前景深度解析",
                demandTitle: "日益增長的市場需求",
                acceptanceTitle: "公眾接受度高",
                acceptanceDesc: "的英國成年人曾使用過某種形式的補充和替代醫學，顯示出廣泛的群眾基礎。",
                usageTitle: "專業服務使用情況",
                usageDesc: "儘管對草藥療法持開放態度，但僅有5%的成年人曾尋求專業中醫師的服務，這表明專業市場仍有巨大的增長潛力。",
                marketTitle: "英國針灸市場預測",
                marketDesc: "市場規模預計將以7.22%的年複合增長率持續擴大，前景看好。",
                educationTitle: "教育路徑與成本",
                pathTitle: "成為專業中醫師的典型路徑",
                pathStep1: "選擇認證課程<br>(BAAB/EHTPA)",
                pathStep2: "3年全日制學習<br>(含至少400小時臨床)",
                pathStep3: "獲得學位或執業證書",
                pathStep4: "加入專業協會<br>(BAcC/RCHM)",
                pathStep5: "獲得地方政府執業許可",
                tuitionTitle: "主要院校年學費比較 (英國學生)",
                tuitionDesc: "選擇經BAAB認證的課程是專業地位的保證，但投資也相對較高。",
                investmentTitle: "完成學位級課程總投資",
                investmentDesc: "（三年學費總額）",
                investmentExtra: "+ 約 £700 額外費用<br>(教材、工具、急救課程等)",
                landscapeTitle: "專業人士版圖與監管",
                regulationTitle: "行業監管框架",
                regulationDesc: "英國中醫行業目前為雙軌制監管，理解其結構對從業至關重要。",
                regVoluntaryTitle: "自願性自我監管 (能力與道德)",
                regVoluntaryDesc: "由專業協會主導，PSA認證其註冊名錄以保障公眾。",
                regMandatoryTitle: "強制性地方許可 (衛生與安全)",
                regMandatoryDesc: "所有從業者及其執業場所必須向地方政府申請許可，確保環境安全。",
                membersTitle: "主要專業協會會員數 (估計)",
                membersDesc: "雖然無準確學生數據，但主要協會的會員規模反映了行業內合格從業者的數量。",
                membersAtcm: "英國中醫藥學會 (ATCM) 註冊會員",
                membersRchm: "英國中藥師學會 (RCHM) 會員",
                membersBaccCount: "人數眾多",
                membersBaccDesc: "英國針灸理事會 (BAcC) 是針灸領域的主要監管機構",
                prospectsTitle: "您的中醫職業前景",
                salaryTitle: "預期年薪範圍",
                salaryDesc: "收入潛力可觀，但很大程度上取決於經驗、地點和執業模式。",
                swotTitle: "機遇與挑戰",
                swotDesc: "中醫行業在英國充滿潛力，但也需應對現存的挑戰。",
                oppTitle: "📈 增長機遇",
                opp1: "市場需求持續增長",
                opp2: "慢性病治療需求龐大",
                opp3: "與西醫整合潛力巨大",
                opp4: "可專攻高需求領域 (如不孕症、痛症管理)",
                chaTitle: "⚠️ 面臨挑戰",
                cha1: "缺乏法定從業者監管",
                cha2: "公眾對中醫存有誤解",
                cha3: "NHS系統整合有限",
                cha4: "私人執業需具備商業頭腦",
                footerSource: "本資訊圖表數據來源於《英國中醫學習與執業前景深度解析》報告。",
                footerCopyright: "所有圖表及數據僅供參考。© 2025",
                chartMarketLabel: "市場規模 (億美元)",
                chartTuitionLabel: "年學費 (英鎊)",
                chartSalaryLabel: "年薪 (英鎊)",
                chartUsageLabels: ["尋求專業中醫師服務", "使用其他替代醫學或草藥"],
                chartTuitionLabels: ["北方針灸學院 (BAAB認證)", "倫敦城市針灸學院 (BAAB認證)", "術蘭中醫學院"],
                chartSalaryLabels: ["受僱起薪", "受僱平均", "自僱 (已建立客源)", "NHS (Band 6)"]
            }
        };

        document.addEventListener('DOMContentLoaded', () => {

            // 2. CHART SETUP AND GLOBAL VARIABLES
            let marketGrowthChart, tcmUsageChart, tuitionFeeChart, salaryChart;
            
            const brilliantBlues = {
                darkBlue: '#0B3954',
                teal: '#087E8B',
                darkTeal: '#3C6E71',
                lightBlue: '#BFD7EA',
                lightGreen: '#C4E5E3',
            };

            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                }
                return label;
            };
            
            const commonChartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { font: { family: "'Inter', 'Noto Sans TC', sans-serif" } }
                    },
                    tooltip: {
                        callbacks: { title: tooltipTitleCallback },
                        titleFont: { family: "'Inter', 'Noto Sans TC', sans-serif" },
                        bodyFont: { family: "'Inter', 'Noto Sans TC', sans-serif" }
                    }
                },
                scales: {
                    x: { ticks: { font: { family: "'Inter', 'Noto Sans TC', sans-serif" } } },
                    y: { ticks: { font: { family: "'Inter', 'Noto Sans TC', sans-serif" } } }
                }
            };
            
            // Function to wrap labels for better display on charts
            function wrapLabels(label, maxWidth) {
                if (typeof label !== 'string' || label.length <= maxWidth) return label;
                const words = label.split(' ');
                const lines = [];
                let currentLine = '';
                words.forEach(word => {
                    if ((currentLine + word).length > maxWidth) {
                        lines.push(currentLine.trim());
                        currentLine = '';
                    }
                    currentLine += word + ' ';
                });
                lines.push(currentLine.trim());
                return lines;
            }

            // Chart creation functions
            function createMarketGrowthChart() {
                const ctx = document.getElementById('marketGrowthChart')?.getContext('2d');
                if (!ctx) return;
                marketGrowthChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['2024', '2027', '2030', '2033', '2035'],
                        datasets: [{
                            label: '', // Will be set by language switcher
                            data: [2.7, 3.4, 4.3, 5.3, 6.23],
                            borderColor: brilliantBlues.teal,
                            backgroundColor: brilliantBlues.lightGreen,
                            fill: true,
                            tension: 0.4,
                        }]
                    },
                    options: { ...commonChartOptions, scales: {y: {beginAtZero: true, ticks: {callback: value => '$' + value + 'B'}}} }
                });
            }

            function createTcmUsageChart() {
                const ctx = document.getElementById('tcmUsageChart')?.getContext('2d');
                if (!ctx) return;
                tcmUsageChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: [], // Will be set by language switcher
                        datasets: [{
                            data: [5, 25],
                            backgroundColor: [brilliantBlues.darkBlue, brilliantBlues.lightBlue],
                            hoverOffset: 4
                        }]
                    },
                    options: { ...commonChartOptions, plugins: {...commonChartOptions.plugins, legend: {display: false}, tooltip: {callbacks: { label: (c) => `${c.label}: ${c.raw}%` }}} }
                });
            }

            function createTuitionFeeChart() {
                const ctx = document.getElementById('tuitionFeeChart')?.getContext('2d');
                if (!ctx) return;
                tuitionFeeChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [], // Will be set by language switcher
                        datasets: [{
                            label: '', // Will be set by language switcher
                            data: [9250, 7500, 5000],
                            backgroundColor: [brilliantBlues.darkBlue, brilliantBlues.teal, brilliantBlues.lightBlue],
                        }]
                    },
                    options: { ...commonChartOptions, scales: {y: {beginAtZero: true, ticks: {callback: value => '£' + value}}} }
                });
            }

            function createSalaryChart() {
                const ctx = document.getElementById('salaryChart')?.getContext('2d');
                if (!ctx) return;
                salaryChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [], // Will be set by language switcher
                        datasets: [{
                            label: '', // Will be set by language switcher
                            data: [21000, 34000, 40000, 43000],
                            backgroundColor: [brilliantBlues.lightBlue, brilliantBlues.teal, brilliantBlues.darkTeal, brilliantBlues.darkBlue],
                        }]
                    },
                     options: { ...commonChartOptions, indexAxis: 'y', scales: {x: {beginAtZero: true, ticks: {callback: value => '£' + (value/1000) + 'k'}}} }
                });
            }

            // 3. LANGUAGE SWITCHING LOGIC
            const switchLanguage = (lang) => {
                // Set HTML lang attribute
                document.documentElement.lang = lang;

                // Update all text elements with data-lang-key
                document.querySelectorAll('[data-lang-key]').forEach(element => {
                    const key = element.getAttribute('data-lang-key');
                    if (translations[lang][key]) {
                        element.innerHTML = translations[lang][key];
                    }
                });

                // Update charts
                updateChartsLanguage(lang);
                
                // Update active button style
                document.querySelectorAll('.lang-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
                });
            };
            
            const updateChartsLanguage = (lang) => {
                const langData = translations[lang];

                // Market Growth Chart
                if (marketGrowthChart) {
                    marketGrowthChart.data.datasets[0].label = langData.chartMarketLabel;
                    marketGrowthChart.update();
                }

                // TCM Usage Chart
                if (tcmUsageChart) {
                    tcmUsageChart.data.labels = langData.chartUsageLabels;
                    tcmUsageChart.update();
                }
                
                // Tuition Fee Chart
                if (tuitionFeeChart) {
                    tuitionFeeChart.data.labels = langData.chartTuitionLabels.map(l => wrapLabels(l, 16));
                    tuitionFeeChart.data.datasets[0].label = langData.chartTuitionLabel;
                    tuitionFeeChart.update();
                }

                // Salary Chart
                if (salaryChart) {
                    salaryChart.data.labels = langData.chartSalaryLabels.map(l => wrapLabels(l, 16));
                    salaryChart.data.datasets[0].label = langData.chartSalaryLabel;
                    salaryChart.update();
                }
            };
            
            // 4. INITIALIZATION
            createMarketGrowthChart();
            createTcmUsageChart();
            createTuitionFeeChart();
            createSalaryChart();

            // Add event listeners to buttons
            document.getElementById('lang-zh').addEventListener('click', () => switchLanguage('zh-Hant'));
            document.getElementById('lang-en').addEventListener('click', () => switchLanguage('en'));

            // Set initial language
            switchLanguage('zh-Hant'); 
        });
    </script>
</body>
</html>
